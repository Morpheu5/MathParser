(function(e){function r(r){for(var t,o,s=r[0],p=r[1],c=r[2],u=0,h=[];u<s.length;u++)o=s[u],a[o]&&h.push(a[o][0]),a[o]=0;for(t in p)Object.prototype.hasOwnProperty.call(p,t)&&(e[t]=p[t]);l&&l(r);while(h.length)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,r=0;r<i.length;r++){for(var n=i[r],t=!0,s=1;s<n.length;s++){var p=n[s];0!==a[p]&&(t=!1)}t&&(i.splice(r--,1),e=o(o.s=n[0]))}return e}var t={},a={1:0},i=[];function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,r,n){o.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,r){if(1&r&&(e=o(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)o.d(n,t,function(r){return e[r]}.bind(null,t));return n},o.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(r,"a",r),r},o.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},o.p="/MathParser/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],p=s.push.bind(s);s.push=r,s=s.slice();for(var c=0;c<s.length;c++)r(s[c]);var l=p;i.push([2,0]),n()})({2:function(e,r,n){e.exports=n("Vtdi")},EDI0:function(e,r,n){},RQWL:function(e,r,n){(function(){function r(e){return e[0]}function t(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.forEach(function(r){a(e,r,n[r])})}return e}function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function i(e){return p(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}var c={alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",varepsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigma:"σ",tau:"τ",upsilon:"υ",phi:"ϕ",chi:"χ",psi:"ψ",omega:"ω",Gamma:"Γ",Delta:"Δ",Theta:"Θ",Lambda:"Λ",Xi:"Ξ",Pi:"Π",Sigma:"Σ",Upsilon:"Υ",Phi:"Φ",Psi:"Ψ",Omega:"Ω"},l=n("D4Uk"),u=l.compile({Int:/[0-9]+/,IdMod:/[a-zA-Z]+_(?:prime)/,Id:{match:/[a-zA-Z]+(?:_[a-zA-Z0-9]+)?/,keywords:{TrigFn:["cos","sin","tan","cosec","sec","cot","cosh","sinh","tanh","cosech","sech","coth","arccos","arcsin","arctan","arccosec","arcsec","arccot","arccosh","arcsinh","arctanh","arccosech","arcsech","arccoth","acos","asin","atan","acosec","asec","acot","acosh","asinh","atanh","acosech","asech","acoth"],Fn:["ln","abs"],Log:["log"],Radix:["sqrt"],Derivative:["diff","Derivative"]}},Rel:["=","==","<","<=",">",">="],PlusMinus:["+","-","±","-","-"],Pow:["**","^"],Mul:["*","×"],Div:["/","÷"],Lparen:"(",Rparen:")",Comma:",",c:/./}),h=null;try{h=window}catch(e){h={innerWidth:800,innerHeight:600}}var m=function(e){var r=e,n=[r];while(r.children.right)r=r.children.right,n=i(n).concat([r]);return n},d=function(e){var r=e;while(r.children.right)r=r.children.right;return r},y=function(e){return e&&"Brackets"===e.type&&_.isEmpty(_.omit(e.children,"argument"))},g=function e(r){if(r.children=_.mapValues(r.children,function(r,n,t){return e(r)}),"Brackets"===r.type||"Fn"===r.type){var n=r.children.argument;y(n)&&(r.children.argument=n.children.argument)}if("Fraction"===r.type){var t=r.children.numerator;y(t)&&(r.children.numerator=t.children.argument);var a=r.children.denominator;y(a)&&(r.children.denominator=a.children.argument)}var i=r.children.superscript;return y(i)&&(r.children.superscript=i.children.argument),r},f=function(e){var r=_.cloneDeep(e[1]);return r.position={x:h.innerWidth/4,y:h.innerHeight/3},r.expression={latex:"",python:""},g(r)},v=function(e){var r=_.cloneDeep(e[1]),n=_.cloneDeep(e[5]),a="=="===e[3].text?"=":e[3].text,i={type:"Relation",properties:{relation:a},children:{right:n}},o=d(r);return o.children["right"]=i,r=g(r),t({},r,{position:{x:h.innerWidth/4,y:h.innerHeight/3},expression:{latex:"",python:""}})},b=function(e){var r=_.cloneDeep(e[2]);return{type:"Brackets",properties:{type:"round"},children:{argument:r}}},R=function(e){var r=_.cloneDeep(e[3]);return"abs"===e[0].text?{type:"AbsoluteValue",children:{argument:r}}:{type:"Fn",properties:{name:e[0].text,allowSubscript:"ln"!==e[0].text,innerSuperscript:!1},children:{argument:r}}},P=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=new RegExp("^a([^r].+)$"),a=e.text;t.test(a)&&(a="arc".concat(t.exec(a)[1]));var i=_.cloneDeep(r),o=_.cloneDeep(n);return null===o?{type:"Fn",properties:{name:a,allowSubscript:!1,innerSuperscript:!0},children:{argument:i}}:{type:"Fn",properties:{name:a,allowSubscript:!1,innerSuperscript:!0},children:{superscript:o,argument:i}}},S=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={type:"Fn",properties:{name:"log",allowSubscript:!0,innerSuperscript:!1},children:{argument:e}};return null!==r?"Num"!==r.type&&"Symbol"!==r.type||(n.children["subscript"]=_.cloneDeep(r)):n.children["subscript"]={type:"Num",properties:{significand:"10"},children:{}},n},D=function(e){var r=_.cloneDeep(e[3]);return{type:"Radix",children:{argument:r}}},L=function(e){var r=_.cloneDeep(e[0]),n=_.cloneDeep(e[4]),t=d(r);if("BinaryOperation"===n.type){var a=_.cloneDeep(n.children.right.children.right);a&&(r.children.right=a,n.children.right.children=_.omit(n.children.right.children,"right"))}else{var i=_.cloneDeep(n.children.right);i&&(r.children.right=i,n.children=_.omit(n.children,"right"))}if(!["Fn","Log","TrigFn"].includes(r.type))return t.children["superscript"]=n,r;switch(r.properties.name){case"ln":return{type:"Brackets",properties:{type:"round"},children:{argument:r,superscript:n}};case"log":return{type:"Brackets",properties:{type:"round"},children:{argument:r,superscript:n}};default:return t.children["superscript"]=n,r}},w=function(e){var r=_.cloneDeep(e[0]),n=_.cloneDeep(e[e.length-1]),t=d(r);return t.children["right"]=n,r},x=function(e){var r=null;"BinaryOperation"===e[4].type?(r=_.cloneDeep(e[4].children.right.children.right),e[4].children.right.children=_.omit(e[4].children.right.children,"right")):(r=_.cloneDeep(e[4].children.right),e[4].children=_.omit(e[4].children,"right"));var n=_.cloneDeep(e[0]),t=m(n).map(function(e){return e.children=_.omit(e.children,"right"),e}),a=t.pop(),i={type:"Fraction",children:{numerator:a,denominator:_.cloneDeep(e[4])}};return r&&(i.children.right=r),t.length>0?(t[t.length-1].children.right=i,t.reduceRight(function(e,r){return r.children.right=e,r})):i},A=function(e){var r=_.cloneDeep(e[0]),n=_.cloneDeep(e[4]),t=d(r);return t.children["right"]={type:"BinaryOperation",properties:{operation:e[2].text},children:{right:n}},r},M=function(e){return{type:"BinaryOperation",properties:{operation:e[0].text},children:{right:e[2]}}},O=function(e){var r=_.map(e.split(""),function(e){return/[0-9]/.test(e)?F([{text:e}]):{type:"Symbol",properties:{letter:e},children:{}}}),n=_.reduceRight(r,function(e,r){return r.children["right"]=e,r});return n},I=function e(r){var n=Object.keys(c),t=r[0].text.split("_"),a=["[a-zA-Z]"].concat(i(n)).join("|"),o=new RegExp("^((?:d|D)elta)(".concat(a,")$")),s=t[0].match(o);if(s)return{type:"Differential",properties:{letter:c[s[1]]||s[1]},children:{argument:e([{text:r[0].text.substring(5)}])}};n.includes(t[0])&&(t[0]=c[t[0]]);var p=O(t[0]);if(t.length>1){n.includes(t[1])&&(t[1]=c[t[1]]);var l=O(t[1]),u=d(p);u.children["subscript"]=l}return p},j=function(e){var r=Object.keys(c),n=e[0].text.split("_");r.includes(n[0])&&(n[0]=c[n[0]]);var t=O(n[0]),a=d(t);return a.properties["modifier"]=n[1],t},F=function(e){return{type:"Num",properties:{significand:e[0].text},children:{}}},T=function(e){var r={type:"Differential",properties:{letter:"d"},children:{argument:e[3]}},n=e[7].reduce(function(e,r){if(0==e.length)return[{object:r,order:1}];var n=e[e.length-1];return"Num"===r.type?(n.order=parseInt(r.properties.significand),i(e.slice(0,e.length-1)).concat([n])):_.isEqual(r,n.object)?(n.order=n.order+1,i(e.slice(0,e.length-1)).concat([n])):i(e).concat([{object:r,order:1}])},[]).map(function(e){var r={type:"Differential",properties:{letter:"d"},children:{argument:e.object}};return e.order>1&&(r.children["order"]={type:"Num",properties:{significand:"".concat(e.order)},children:{}}),r}),t=n.reduce(function(e,r){return e+parseInt(r.children.order?r.children.order.properties.significand:"1")},0);t>1&&(r.children["order"]={type:"Num",properties:{significand:"".concat(t)},children:{}});var a=_.reduceRight(n,function(e,r){return r.children["right"]=e,r});return{type:"Derivative",children:{numerator:r,denominator:a}}},E={Lexer:u,ParserRules:[{name:"main",symbols:["_","AS","_"],postprocess:f},{name:"main",symbols:["_","AS","_",u.has("Rel")?{type:"Rel"}:Rel,"_","AS","_"],postprocess:v},{name:"P",symbols:[u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:b},{name:"P",symbols:[u.has("TrigFn")?{type:"TrigFn"}:TrigFn,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:e=>P(e[0],e[3],null)},{name:"P",symbols:[u.has("TrigFn")?{type:"TrigFn"}:TrigFn,u.has("Pow")?{type:"Pow"}:Pow,"NUM",u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:e=>P(e[0],e[5],e[2])},{name:"P",symbols:[u.has("TrigFn")?{type:"TrigFn"}:TrigFn,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Rparen")?{type:"Rparen"}:Rparen,u.has("Pow")?{type:"Pow"}:Pow,"NUM"],postprocess:e=>P(e[0],e[3],e[7])},{name:"P",symbols:[u.has("Derivative")?{type:"Derivative"}:Derivative,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Comma")?{type:"Comma"}:Comma,"_","ARGS","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:T},{name:"P",symbols:[u.has("Log")?{type:"Log"}:Log,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:e=>{return S(e[3])}},{name:"P",symbols:[u.has("Log")?{type:"Log"}:Log,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Comma")?{type:"Comma"}:Comma,"_","VAR","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:e=>{return S(e[3],e[7])}},{name:"P",symbols:[u.has("Log")?{type:"Log"}:Log,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Comma")?{type:"Comma"}:Comma,"_","NUM","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:e=>{return S(e[3],e[7])}},{name:"P",symbols:[u.has("Radix")?{type:"Radix"}:Radix,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:D},{name:"P",symbols:[u.has("Fn")?{type:"Fn"}:Fn,u.has("Lparen")?{type:"Lparen"}:Lparen,"_","AS","_",u.has("Rparen")?{type:"Rparen"}:Rparen],postprocess:R},{name:"P",symbols:["VAR"],postprocess:r},{name:"P",symbols:["NUM"],postprocess:r},{name:"P",symbols:[u.has("PlusMinus")?{type:"PlusMinus"}:PlusMinus,"_","P"],postprocess:M},{name:"ARGS",symbols:["AS"],postprocess:e=>[e[0]]},{name:"ARGS",symbols:["ARGS","_",u.has("Comma")?{type:"Comma"}:Comma,"_","AS"],postprocess:e=>e[0].concat(e[4])},{name:"E",symbols:["P","_",u.has("Pow")?{type:"Pow"}:Pow,"_","E"],postprocess:L},{name:"E",symbols:["P"],postprocess:r},{name:"MD",symbols:["MD","_",u.has("Mul")?{type:"Mul"}:Mul,"_","E"],postprocess:w},{name:"MD",symbols:["MD","_",u.has("Div")?{type:"Div"}:Div,"_","E"],postprocess:x},{name:"MD",symbols:["MD","_","E"],postprocess:w},{name:"MD",symbols:["E"],postprocess:r},{name:"AS",symbols:["AS","_",u.has("PlusMinus")?{type:"PlusMinus"}:PlusMinus,"_","MD"],postprocess:A},{name:"AS",symbols:["MD"],postprocess:r},{name:"VAR",symbols:[u.has("Id")?{type:"Id"}:Id],postprocess:I},{name:"VAR",symbols:[u.has("IdMod")?{type:"IdMod"}:IdMod],postprocess:j},{name:"NUM",symbols:[u.has("Int")?{type:"Int"}:Int],postprocess:F},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"]}],ParserStart:"main"};"undefined"!==typeof e&&"undefined"!==typeof e.exports?e.exports=E:window.grammar=E})()},"S+GS":function(e,r,n){"use strict";var t=n("wzSV"),a=n.n(t);a.a},Vtdi:function(e,r,n){"use strict";n.r(r);n("VRzm");var t=n("Kw5r"),a=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{id:"app"}},[n("MathInput")],1)},i=[],o=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{id:"container"}},[e._m(0),n("p",[e._v("Type some maths, check that the tree gets generated correctly.")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mathInput,expression:"mathInput"}],attrs:{placeholder:"Your math goes here",name:"mathstring"},domProps:{value:e.mathInput},on:{keyup:e.doTheThing,input:function(r){r.target.composing||(e.mathInput=r.target.value)}}}),n("pre",[n("strong",[e._v("Input")]),e._v(":"),n("br"),e._v("       "+e._s(e.mathInput))]),n("pre",[e._v("---"),n("br"),e._v(e._s(e.parser.lexer))]),n("pre",[n("strong",[e._v("Output size")]),e._v(": "+e._s(e.output.length)),n("br"),e._v(e._s(e.output))])])},s=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("h1",[e._v("Symbolic math parser for "),n("a",{attrs:{href:"https://isaacphysics.org"}},[e._v("Isaac Physics")])])}],p=n("LvDl"),c=n.n(p),l=n("rFXv"),u=n("RQWL"),h=n.n(u),m=l["Grammar"].fromCompiled(h.a),d={data:function(){return{mathInput:"",parser:{},output:""}},methods:{doTheThing:function(){var e=new l["Parser"](m);try{this.output=c.a.uniqWith(e.feed(this.mathInput).results,c.a.isEqual)}catch(e){this.output="Some error occurred: ".concat(e)}}},mounted:function(){this.doTheThing()}},y=d,g=(n("S+GS"),n("KHd+")),f=Object(g["a"])(y,o,s,!1,null,"4e126198",null),_=f.exports,v={name:"app",components:{MathInput:_}},b=v,R=(n("ZL7j"),Object(g["a"])(b,a,i,!1,null,null,null)),P=R.exports;t["a"].config.productionTip=!1,new t["a"]({render:function(e){return e(P)}}).$mount("#app")},ZL7j:function(e,r,n){"use strict";var t=n("EDI0"),a=n.n(t);a.a},wzSV:function(e,r,n){}});
//# sourceMappingURL=app.6db4081c.js.map